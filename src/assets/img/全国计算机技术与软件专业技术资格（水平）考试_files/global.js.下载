//转义--
window.html_encode = function( html ){
	if(typeof(html) == 'string'){
		return html.replace(/[<>&"]/g,function(c){return {'<':'&lt;','>':'&gt;','&':'&amp;','"':'&quot;'}[c];});
	}else{
		return html;
	}
}
//反转义
window.html_decode = function(text){
	var temp = document.createElement("div");  
	temp.innerHTML = text;    
	var output = temp.innerText || temp.textContent;    
	temp = null;    
	return output;
}

//判断是否是身份证号码,考生端所有身份证判断共用
window.isIdCard = function(idcardbody){
	if (idcardbody.length!= 18) { return false;}
	var result=idcardbody.substring(17,18);
	idcardbody=idcardbody.substring(0,17);
	var len=idcardbody.length;
	if (len != 17) {
		return false;
	}
	//加权因子
	$factor = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
	//校验码对应值
	$code = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'];
	$checksum = 0;

	for ($i = 0; $i < len; $i++) {
		$checksum += idcardbody.substr($i,1) * $factor[$i];
	}
	//最后一位数
	
	
	if(result.toUpperCase() == $code[$checksum % 11]){
		return true;
	}else{
		return false;
	}
}

//输入的如果是身份证，转换为大写之后返回
window.dealIdCard = function(id){
	return id.toUpperCase(id);
}


layui.use(['jquery'],function(){
	var $=layui.jquery;
	//所有页面都会引用到的退出事件
	$(".exit").click(function(){
		layer.confirm("确定要退出吗？",{
			title: '退出',
			btn: ['确定','取消'],
		},function(index,layero){
			layer.closeAll(); //关闭提示弹框
			window.location.href = baseUrl+"/sign/off";
		});
	});

	//ajax加loading如果原本已经有loading则不执行loading
	var ajaxloading;
    $(document).bind("ajaxSend", function (e,xhr,opt) {
		//判断页面上如果没有loading
		if(opt.showLoading){
			ajaxloading = layer.load(2, {
				shade: [0.01,'#fff'] //0.1透明度的白色背景
			});
		}
	}).bind("ajaxComplete", function (e, xhr, opt) {
		layer.close(ajaxloading);
	});
})