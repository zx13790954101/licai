{"version":3,"sources":["webpack:///src/view/kline2.vue","webpack:///./src/view/kline2.vue","webpack:///./src/assets/kline/plug.js","webpack:///./src/assets/kline/echarts2.js","webpack:///./src/view/kline2.vue?a8dd","webpack:///./src/view/kline2.vue?d34c","webpack:///./src/view/kline2.vue?b314","webpack:///./src/view/kline2.vue?a447","webpack:///./src/view/kline2.vue?d177"],"names":["data","daterange","region","created","components","mounted","this","$nextTick","setTimeout","methods","onSubmit","component","calcEMA","calcDIF","calcDEA","calcMACD","short","long","mid","field","i","l","dif","dea","macd","result","length","push","emaShort","emaLong","n","ema","a","getMarketData","name","date1","date2","htmlobj","$","ajax","url","async","JSON","parse","responseText","dealDataTo","array1","forEach","item","item1","open","close","low","high","date","num","splitData","rawData","datas","times","vols","macds","difs","deas","splice","dealEndData","data1","data2","index","parseFloat","reverse","calculateMA","dayCount","len","sum","j","dates","map","console","log","option","legend","inactiveColor","tooltip","trigger","axisPointer","animation","type","lineStyle","color","width","opacity","xAxis","axisLine","yAxis","scale","splitLine","show","grid","bottom","dataZoom","textStyle","handleIcon","dataBackground","areaStyle","brushSelect","series","itemStyle","color0","borderColor","borderColor0","markPoint","coord","value","symbolSize","label","formatter","param","smooth","showSymbol","klineInit","dom","document","getElementById","echarts","init","setOption","exports","___CSS_LOADER_API_IMPORT___","module","api","content","__esModule","default","options","locals","render","_vm","_c","_self","staticClass","_v","attrs","model","callback","$$v","expression","on","staticStyle","staticRenderFns"],"mappings":"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","file":"static/js/63.4911f37b0ccec2b3a09f.js","sourcesContent":["<template>\r\n  <div class=\"kline2\">\r\n\r\n    <nav class=\"flex-c\">\r\n       <div class=\"flex-item\">\r\n          \r\n      </div>\r\n      <div class=\"r\">\r\n              <el-select v-model=\"region\" placeholder=\"请选择活动区域\">\r\n                <el-option label=\"区域一\" value=\"shanghai\"></el-option>\r\n                <el-option label=\"区域二\" value=\"beijing\"></el-option>\r\n              </el-select>\r\n              <el-date-picker\r\n              v-model=\"daterange\"\r\n              type=\"daterange\"\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\">\r\n            </el-date-picker>\r\n             <el-button type=\"primary\" @click=\"onSubmit\">查询</el-button>\r\n      </div>\r\n    </nav>\r\n    <div id=\"kline2\" class=\"kline-box\" style=\"height: 75vh\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport $ from \"jquery\";\r\nimport kline from \"./../assets/kline/echarts2.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      daterange:'',\r\n      region:'',\r\n    };\r\n  },\r\n  created() {},\r\n  components: {},\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      setTimeout(function () {\r\n        kline.klineInit();\r\n      }, 2000);\r\n    });\r\n  },\r\n  methods: {\r\n    onSubmit(){\r\n      \r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.kline2 {\r\n  nav{\r\n    background-color: #100c2a;\r\n    padding:  20px 10px;\r\n  }\r\n}\r\n</style>\r\n","import { render, staticRenderFns } from \"./kline2.vue?vue&type=template&id=b0c2dfe4&scoped=true\"\nimport script from \"./kline2.vue?vue&type=script&lang=js\"\nexport * from \"./kline2.vue?vue&type=script&lang=js\"\nimport style0 from \"./kline2.vue?vue&type=style&index=0&id=b0c2dfe4&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b0c2dfe4\",\n  null\n  \n)\n\nexport default component.exports","import $ from \"jquery\";\r\nvar input, macd;\r\nvar calcEMA, calcDIF, calcDEA, calcMACD;\r\n/*\r\n * 计算DIF快线，用于MACD\r\n * @param {number} short 快速EMA时间窗口\r\n * @param {number} long 慢速EMA时间窗口\r\n * @param {array} data 输入数据\r\n * @param {string} field 计算字段配置\r\n */\r\ncalcDIF = function (short, long, data, field) {\r\n  var i, l, dif, emaShort, emaLong;\r\n  dif = [];\r\n  emaShort = calcEMA(short, data, field);\r\n  emaLong = calcEMA(long, data, field);\r\n  for (i = 0, l = data.length; i < l; i++) {\r\n    dif.push(emaShort[i] - emaLong[i]);\r\n  }\r\n  return dif;\r\n};\r\ncalcDEA = function (mid, dif) {\r\n  return calcEMA(mid, dif);\r\n};\r\n/*\r\n * K线数据\r\n * 开盘价，收盘价，最低价，最高价\r\n */\r\n/*\r\n * 计算EMA指数平滑移动平均线，用于MACD\r\n * @param {number} n 时间窗口\r\n * @param {array} data 输入数据\r\n * @param {string} field 计算字段配置\r\n */\r\ncalcEMA = function (n, data, field) {\r\n  var i, l, ema, a;\r\n  a = 2 / (n + 1);\r\n  if (field) {\r\n    //二维数组\r\n    ema = [data[0][field]];\r\n    for (i = 1, l = data.length; i < l; i++) {\r\n      ema.push(a * data[i][field] + (1 - a) * ema[i - 1]);\r\n    }\r\n  } else {\r\n    //普通一维数组\r\n    ema = [data[0]];\r\n    for (i = 1, l = data.length; i < l; i++) {\r\n      ema.push(a * data[i] + (1 - a) * ema[i - 1]);\r\n    }\r\n  }\r\n  return ema;\r\n};\r\n/*\r\n* 计算MACD\r\n* @param {number} short 快速EMA时间窗口\r\n* @param {number} long 慢速EMA时间窗口\r\n* @param {number} mid dea时间窗口\r\n* @param {array} data 输入数据\r\n* @param {string} field 计算字段配置\r\n*/\r\ncalcMACD = function (short, long, mid, data, field) {\r\n  var i, l, dif, dea, macd, result;\r\n  result = {};\r\n  macd = [];\r\n  dif = calcDIF(short, long, data, field);\r\n  dea = calcDEA(mid, dif);\r\n  for (i = 0, l = data.length; i < l; i++) {\r\n    macd.push((dif[i] - dea[i]) * 2);\r\n  }\r\n  result.dif = dif;\r\n  result.dea = dea;\r\n  result.macd = macd;\r\n  return result;\r\n};\r\n//获取大盘指数\r\nfunction getMarketData (name, date1, date2) {\r\n  var htmlobj = $.ajax({\r\n    url:\r\n      'https://api.doctorxiong.club/v1/stock/kline/day?code=' +\r\n      name +\r\n      '&startDate=' +\r\n      date1 +\r\n      '&endDate=' +\r\n      date2,\r\n    async: false,\r\n  });\r\n\r\n  return JSON.parse(htmlobj.responseText).data\r\n}\r\nfunction calcMACD(short, long, mid, data, field) {\r\n  var i, l, dif, dea, macd, result;\r\n  result = {};\r\n  macd = [];\r\n  dif = calcDIF(short, long, data, field);\r\n  dea = calcDEA(mid, dif);\r\n  for (i = 0, l = data.length; i < l; i++) {\r\n    macd.push((dif[i] - dea[i]) * 2);\r\n  }\r\n  result.dif = dif;\r\n  result.dea = dea;\r\n  result.macd = macd;\r\n  return result;\r\n};\r\n\r\nfunction dealDataTo (data) {\r\n  let array1 = [];\r\n  data.forEach(item => {\r\n\r\n    let item1 = {\r\n      open: item[1],\r\n      close: item[2],\r\n      low: item[3],\r\n      high: item[4],\r\n      date: item[0],\r\n      num: item[5]\r\n    }\r\n    array1.push(item1)\r\n  });\r\n  return array1\r\n}\r\n\r\n//数组处理\r\nfunction splitData (rawData) {\r\n  var datas = [];\r\n  var times = [];\r\n  var vols = [];\r\n  var macds = []; var difs = []; var deas = [];\r\n  for (var i = 0; i < rawData.length; i++) {\r\n    datas.push(rawData[i]);\r\n    times.push(rawData[i].splice(0, 1)[0]);\r\n    vols.push(rawData[i][4]);\r\n    macds.push(rawData[i][6]);\r\n    difs.push(rawData[i][7]);\r\n    deas.push(rawData[i][8]);\r\n  }\r\n  return {\r\n    datas: datas,\r\n    times: times,\r\n    vols: vols,\r\n    macds: macds,\r\n    difs: difs,\r\n    deas: deas\r\n  };\r\n}\r\n\r\nfunction dealEndData (data1, data2) {\r\n  let array1 = [];\r\n  data1.forEach((item, index) => {\r\n    let item1 = [\r\n      item[0],\r\n      parseFloat(item[1]),\r\n      parseFloat(item[2]),\r\n      parseFloat(item[3]),\r\n      parseFloat(item[4]),\r\n      parseFloat(item[5]),\r\n      parseFloat(item[1]) - parseFloat(item[2]) > 0 ? 0 : 1,\r\n      data2.macd[index],\r\n      data2.dif[index],\r\n      data2.dea[index],\r\n    ]\r\n    array1.push(item1)\r\n  });\r\n  return array1\r\n}\r\nexport  {\r\n  getMarketData,\r\n  calcMACD,\r\n  dealDataTo,\r\n  splitData,\r\n  dealEndData\r\n}\r\n","//数据模型 time0 open1 close2 min3 max4 vol5 tag6 macd7 dif8 dea9\r\n//  日期        五日线\r\n//现在还要计算  柱子的颜色，和    macd  dif  dea\r\n//['2015-10-19',18.56,18.25,18.19,18.56,55.00,0,-0.00,0.08,0.09]\r\n//数据的模拟\r\nimport {\r\n  getMarketData,\r\n  calcMACD,\r\n  dealDataTo,\r\n  splitData,\r\n  dealEndData\r\n} from './plug'\r\n\r\n// prettier-ignore\r\nvar rawData = [\r\n  ['2015/12/31', '3570.47', '3539.18', '-33.69', '-0.94%', '3538.35', '3580.6', '176963664', '25403106', '-']\r\n].reverse();\r\n\r\n\r\n\r\nvar jsondata = getMarketData('sh000001', '2020-01-05', '2022-03-24')\r\n\r\n// console.log(jsondata)\r\n//   var  macd = calcMACD(12, 26, 9, dealDataTo(jsondata), \"close\");\r\n\r\n//   rawData = splitData(dealEndData(jsondata, macd))\r\n\r\nrawData = jsondata\r\n\r\n//设置气泡的数据\r\nvar markdata = [{\r\n  name: '最大值',\r\n  coord: ['2021-01-08', 3570],\r\n  value: '2021-01-08'\r\n}]\r\n\r\nfunction calculateMA(dayCount, data) {\r\n  var result = [];\r\n  for (var i = 0, len = data.length; i < len; i++) {\r\n    if (i < dayCount) {\r\n      result.push('-');\r\n      continue;\r\n    }\r\n    var sum = 0;\r\n    for (var j = 0; j < dayCount; j++) {\r\n      sum += +data[i - j][1];\r\n    }\r\n    result.push(sum / dayCount);\r\n  }\r\n  return result;\r\n}\r\nconst dates = rawData.map(function (item) {\r\n  return item[0];\r\n});\r\nconst data = rawData.map(function (item) {\r\n  return [+item[1], +item[2], +item[3], +item[4]];\r\n});\r\n\r\nconsole.log(\"calculateMA\", rawData)\r\nvar option = {\r\n  legend: {\r\n    data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30'],\r\n    inactiveColor: '#777'\r\n  },\r\n  tooltip: {\r\n    trigger: 'axis',\r\n    axisPointer: {\r\n      animation: false,\r\n      type: 'cross',\r\n      lineStyle: {\r\n        color: '#376df4',\r\n        width: 2,\r\n        opacity: 1\r\n      }\r\n    }\r\n  },\r\n\r\n  xAxis: {\r\n    type: 'category',\r\n    data: dates,\r\n    axisLine: {\r\n      lineStyle: {\r\n        color: '#8392A5'\r\n      }\r\n    }\r\n  },\r\n  yAxis: {\r\n    scale: true,\r\n    axisLine: {\r\n      lineStyle: {\r\n        color: '#8392A5'\r\n      }\r\n    },\r\n    splitLine: {\r\n      show: false\r\n    }\r\n  },\r\n  grid: {\r\n    bottom: 80\r\n  },\r\n  dataZoom: [{\r\n      textStyle: {\r\n        color: '#8392A5'\r\n      },\r\n      handleIcon: 'path://M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',\r\n      dataBackground: {\r\n        areaStyle: {\r\n          color: '#8392A5'\r\n        },\r\n        lineStyle: {\r\n          opacity: 0.8,\r\n          color: '#8392A5'\r\n        }\r\n      },\r\n      brushSelect: true\r\n    },\r\n    {\r\n      type: 'inside'\r\n    }\r\n  ],\r\n  series: [{\r\n      type: 'candlestick',\r\n      name: 'Day',\r\n      data: data,\r\n      itemStyle: {\r\n        color: '#FD1050',\r\n        color0: '#0CF49B',\r\n        borderColor: '#FD1050',\r\n        borderColor0: '#0CF49B'\r\n      },\r\n      markPoint: {\r\n        data: markdata,\r\n        symbolSize: 100, // 容器大小\r\n        label: {\r\n          color: '#ffffff',\r\n          formatter: function (param) {\r\n\r\n            return param != null ? param.value : '';\r\n          },\r\n        }\r\n      },\r\n    },\r\n    {\r\n      name: 'MA5',\r\n      type: 'line',\r\n      data: calculateMA(5, data),\r\n      smooth: true,\r\n      showSymbol: false,\r\n      lineStyle: {\r\n        width: 1\r\n      }\r\n    },\r\n    {\r\n      name: 'MA10',\r\n      type: 'line',\r\n      data: calculateMA(10, data),\r\n      smooth: true,\r\n      showSymbol: false,\r\n      lineStyle: {\r\n        width: 1\r\n      }\r\n    },\r\n    {\r\n      name: 'MA20',\r\n      type: 'line',\r\n      data: calculateMA(20, data),\r\n      smooth: true,\r\n      showSymbol: false,\r\n      lineStyle: {\r\n        width: 1\r\n      }\r\n    },\r\n    {\r\n      name: 'MA30',\r\n      type: 'line',\r\n      data: calculateMA(30, data),\r\n      smooth: true,\r\n      showSymbol: false,\r\n      lineStyle: {\r\n        width: 1\r\n      }\r\n    }\r\n  ]\r\n};\r\n\r\n\r\n\r\nfunction klineInit() {\r\n  //  开盘 ，收盘价  最高 ，最低\r\n  var dom = document.getElementById('kline2');\r\n  var myChart = echarts.init(dom, 'dark');\r\n  //设置开启深色模式\r\n  myChart.setOption(option);\r\n}\r\n\r\nexport default {\r\n  klineInit\r\n}\r\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".kline2 nav[data-v-b0c2dfe4]{background-color:#100c2a;padding:20px 10px}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../node_modules/style-loader/dist/cjs.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kline2.vue?vue&type=style&index=0&id=b0c2dfe4&prod&scoped=true&lang=scss\"","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kline2.vue?vue&type=style&index=0&id=b0c2dfe4&prod&scoped=true&lang=scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"kline2\"},[_c('nav',{staticClass:\"flex-c\"},[_c('div',{staticClass:\"flex-item\"}),_vm._v(\" \"),_c('div',{staticClass:\"r\"},[_c('el-select',{attrs:{\"placeholder\":\"请选择活动区域\"},model:{value:(_vm.region),callback:function ($$v) {_vm.region=$$v},expression:\"region\"}},[_c('el-option',{attrs:{\"label\":\"区域一\",\"value\":\"shanghai\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"区域二\",\"value\":\"beijing\"}})],1),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.daterange),callback:function ($$v) {_vm.daterange=$$v},expression:\"daterange\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"查询\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"kline-box\",staticStyle:{\"height\":\"75vh\"},attrs:{\"id\":\"kline2\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kline2.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./kline2.vue?vue&type=script&lang=js\""],"sourceRoot":""}